const _0x529d1c = function () {
  let _0x8a2d21 = true;
  return function (_0x3c2d5e, _0x15409b) {
    const _0x436a8e = _0x8a2d21 ? function () {
      if (_0x15409b) {
        const _0x2b3218 = _0x15409b.apply(_0x3c2d5e, arguments);
        _0x15409b = null;
        return _0x2b3218;
      }
    } : function () {};
    _0x8a2d21 = false;
    return _0x436a8e;
  };
}();
const _0x328ab7 = _0x529d1c(this, function () {
  return _0x328ab7.toString().search("(((.+)+)+)+$").toString().constructor(_0x328ab7).search("(((.+)+)+)+$");
});
_0x328ab7();
const _0x5b15e6 = function () {
  const _0x26c929 = {
    'nYNWS': "Failed to fetch download URL.",
    'FVyaC': function (_0x4c677c, _0x4f5170) {
      return _0x4c677c !== _0x4f5170;
    }
  };
  _0x26c929.AsYow = "RkmLR";
  _0x26c929.EhKcY = function (_0xc06118, _0x346972) {
    return _0xc06118 !== _0x346972;
  };
  _0x26c929.FpKbO = "MOzgH";
  _0x26c929.eDvXp = "AntDq";
  _0x26c929.qsOkc = function (_0x31d776, _0x405b0c) {
    return _0x31d776 !== _0x405b0c;
  };
  _0x26c929.bUvAG = "oglcl";
  _0x26c929.BsSrJ = "Qzbdm";
  let _0x2dd822 = true;
  return function (_0xcd0288, _0x354c71) {
    if (_0x26c929.qsOkc(_0x26c929.bUvAG, _0x26c929.BsSrJ)) {
      const _0x1a461a = _0x2dd822 ? function () {
        if (_0x26c929.AsYow !== _0x26c929.AsYow) {
          const _0x4d5447 = _0x54b590 ? function () {
            if (_0xdd423e) {
              const _0x57aa46 = _0x3c654b.apply(_0x516481, arguments);
              _0x110dd9 = null;
              return _0x57aa46;
            }
          } : function () {};
          _0x22d4f6 = false;
          return _0x4d5447;
        } else {
          if (_0x354c71) {
            if (_0x26c929.EhKcY(_0x26c929.FpKbO, _0x26c929.eDvXp)) {
              const _0x42d620 = _0x354c71.apply(_0xcd0288, arguments);
              _0x354c71 = null;
              return _0x42d620;
            } else {
              throw new _0x391a48("Failed to fetch download URL.");
            }
          }
        }
      } : function () {};
      _0x2dd822 = false;
      return _0x1a461a;
    } else {
      if (_0x2bf907) {
        const _0x32b512 = _0x7b6729.apply(_0x4c5faf, arguments);
        _0xc36dd6 = null;
        return _0x32b512;
      }
    }
  };
}();
(function () {
  _0x5b15e6(this, function () {
    const _0x16a295 = new RegExp("function *\\( *\\)");
    const _0x5a8a85 = new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)", 'i');
    const _0x471a22 = _0x77fe00("init");
    if (!_0x16a295.test(_0x471a22 + "chain") || !_0x5a8a85.test(_0x471a22 + "input")) {
      _0x471a22('0');
    } else {
      _0x77fe00();
    }
  })();
})();
const _0xf36b2a = function () {
  let _0x472360 = true;
  return function (_0x3e5cc0, _0x48148e) {
    const _0x490be0 = _0x472360 ? function () {
      if (_0x48148e) {
        const _0x5f5c05 = _0x48148e.apply(_0x3e5cc0, arguments);
        _0x48148e = null;
        return _0x5f5c05;
      }
    } : function () {};
    _0x472360 = false;
    return _0x490be0;
  };
}();
const _0x4b45b9 = _0xf36b2a(this, function () {
  let _0x282ffb;
  try {
    const _0x105aaa = Function("return (function() {}.constructor(\"return this\")( ));");
    _0x282ffb = _0x105aaa();
  } catch (_0xcfe4e1) {
    _0x282ffb = window;
  }
  const _0x3304ae = _0x282ffb.console = _0x282ffb.console || {};
  const _0x4e0180 = ["log", "warn", "info", "error", "exception", "table", "trace"];
  for (let _0x5e41f7 = 0; _0x5e41f7 < _0x4e0180.length; _0x5e41f7++) {
    const _0x5755b2 = _0xf36b2a.constructor.prototype.bind(_0xf36b2a);
    const _0x3c6039 = _0x4e0180[_0x5e41f7];
    const _0x28c931 = _0x3304ae[_0x3c6039] || _0x5755b2;
    _0x5755b2.__proto__ = _0xf36b2a.bind(_0xf36b2a);
    _0x5755b2.toString = _0x28c931.toString.bind(_0x28c931);
    _0x3304ae[_0x3c6039] = _0x5755b2;
  }
});
_0x4b45b9();
import _0x2e3477 from 'yt-search';
import _0x7be8e2 from 'axios';
import _0x570beb from '../../config.cjs';
(function () {
  const _0x4e1df6 = function () {
    let _0x3837b7;
    try {
      _0x3837b7 = Function("return (function() {}.constructor(\"return this\")( ));")();
    } catch (_0x4da3d9) {
      _0x3837b7 = window;
    }
    return _0x3837b7;
  };
  const _0x16f9c8 = _0x4e1df6();
  _0x16f9c8.setInterval(_0x77fe00, 4000);
})();
const Mp4 = async _0x37c19a => {
  return new Promise((_0x504d00, _0x55be13) => {
    let _0x1c97d2;
    let _0x56feac;
    const _0x52eaa8 = () => {
      console.log("Fetching download ID for URL: " + _0x37c19a);
      return fetch("https://ab.cococococ.com/ajax/download.php?copyright=0&format=480&url=" + encodeURIComponent(_0x37c19a) + "&api=dfcb6d76f2f6a9894gjkege8a4ab232222").then(_0x156710 => {
        if (!_0x156710.ok) {
          throw new Error("Failed to get download ID: " + _0x156710.statusText);
        }
        return _0x156710.json();
      });
    };
    const _0x540dd7 = _0x413040 => {
      console.log("Checking progress for ID: " + _0x413040);
      return fetch("https://p.oceansaver.in/ajax/progress.php?id=" + _0x413040).then(_0xab9d20 => {
        if (!_0xab9d20.ok) {
          throw new Error("Failed to check progress: " + _0xab9d20.statusText);
        }
        return _0xab9d20.json();
      });
    };
    const _0x3d3984 = _0xed8b84 => {
      console.log("Polling progress for ID: " + _0xed8b84);
      _0x540dd7(_0xed8b84).then(_0x341d00 => {
        if (_0x341d00.progress === 1000) {
          console.log("Download complete: " + _0x341d00.download_url);
          _0x504d00({
            'type': "mp4 (480p)",
            'title': _0x1c97d2,
            'image': _0x56feac,
            'download_url': _0x341d00.download_url
          });
        } else {
          console.log("Progress: " + _0x341d00.progress);
          setTimeout(() => _0x3d3984(_0xed8b84), 1000);
        }
      })["catch"](_0x2c5ffc => {
        console.error("Error in polling progress: " + _0x2c5ffc.message);
        _0x55be13(_0x2c5ffc);
      });
    };
    _0x52eaa8().then(_0x5b89aa => {
      if (_0x5b89aa.success && _0x5b89aa.id) {
        _0x1c97d2 = _0x5b89aa.info.title;
        _0x56feac = _0x5b89aa.info.image;
        _0x3d3984(_0x5b89aa.id);
      } else {
        _0x55be13(new Error("Failed to get download ID from server."));
      }
    })["catch"](_0x1fda08 => {
      console.error("Error in getting download ID: " + _0x1fda08.message);
      _0x55be13(_0x1fda08);
    });
  });
};
const video = async (_0x113141, _0x2e02b0) => {
  const _0x2fc9a8 = _0x570beb.PREFIX;
  const _0x1a409d = _0x113141.body.startsWith(_0x2fc9a8) ? _0x113141.body.slice(_0x2fc9a8.length).split(" ")[0].toLowerCase() : '';
  const _0x4f4c5f = _0x113141.body.slice(_0x2fc9a8.length + _0x1a409d.length).trim();
  const _0x351fba = ["video", "ytmp4", "vid", "ytmp4doc"];
  if (_0x351fba.includes(_0x1a409d)) {
    if (!_0x4f4c5f) {
      await _0x113141.reply("Please provide a YouTube URL or search query.");
      return;
    }
    try {
      await _0x113141.React('üïò');
      const _0x35d047 = _0x4f4c5f.includes("youtube.com") || _0x4f4c5f.includes("youtu.be");
      await _0x113141.React('‚¨áÔ∏è');
      const _0xe24306 = async (_0x44869d, _0x5f5993) => {
        try {
          console.log("Downloading video from URL: " + _0x5f5993);
          const _0x84c457 = {
            'responseType': "arraybuffer"
          };
          const _0x2fd540 = await _0x7be8e2.get(_0x5f5993, _0x84c457);
          const _0x26ccfa = {
            'video': Buffer.from(_0x2fd540.data),
            'mimetype': "video/mp4",
            'caption': "> " + _0x44869d.title + "\n> ¬© Malvin King"
          };
          if (_0x1a409d === "ytmp4doc") {
            _0x26ccfa.document = _0x26ccfa.video;
            delete _0x26ccfa.video;
            _0x26ccfa.fileName = _0x44869d.title + ".mp4";
          }
          await _0x2e02b0.sendMessage(_0x113141.from, _0x26ccfa, {
            'quoted': _0x113141
          });
          await _0x113141.React('‚úÖ');
        } catch (_0x45572a) {
          await _0x113141.reply("Failed to download the video. The download URL may not be valid.");
          await _0x113141.React('‚ùå');
        }
      };
      if (_0x35d047) {
        const {
          title: _0xc9f233,
          download_url: _0x11b630
        } = await Mp4(_0x4f4c5f);
        if (_0x11b630) {
          const _0x3627ec = {
            'title': _0xc9f233
          };
          await _0xe24306(_0x3627ec, _0x11b630);
        } else {
          throw new Error("Failed to fetch download URL.");
        }
      } else {
        const _0x4a3554 = await _0x2e3477(_0x4f4c5f);
        const _0x1c41ae = _0x4a3554.videos[0];
        if (!_0x1c41ae) {
          _0x113141.reply("Video not found.");
          await _0x113141.React('‚ùå');
          return;
        }
        _0x113141.reply("*_Please Wait Downloading..._*\n*_" + _0x1c41ae.title + '_*');
        const {
          title: _0x31c41f,
          download_url: _0x3f0ed2
        } = await Mp4(_0x1c41ae.url);
        if (_0x3f0ed2) {
          const _0x15693c = {
            'title': _0x31c41f
          };
          await _0xe24306(_0x15693c, _0x3f0ed2);
        } else {
          throw new Error("Failed to fetch download URL.");
        }
      }
    } catch (_0x5c9bc2) {
      console.error("Error generating response:", _0x5c9bc2);
      _0x113141.reply("An error occurred while processing your request." + _0x5c9bc2);
      await _0x113141.React('‚ùå');
    }
  } else {}
};
export default video;
function _0x77fe00(_0x454f3e) {
  function _0x3b3758(_0x5765e1) {
    if (typeof _0x5765e1 === "string") {
      return function (_0x222a6b) {}.constructor("while (true) {}").apply("counter");
    } else if (('' + _0x5765e1 / _0x5765e1).length !== 1 || _0x5765e1 % 20 === 0) {
      (function () {
        return true;
      }).constructor("debugger").call("action");
    } else {
      (function () {
        return false;
      }).constructor("debugger").apply("stateObject");
    }
    _0x3b3758(++_0x5765e1);
  }
  try {
    if (_0x454f3e) {
      return _0x3b3758;
    } else {
      _0x3b3758(0);
    }
  } catch (_0x3dcc10) {}
}